<!doctype html>
<html lang="en-US">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <!-- Begin Jekyll SEO tag v2.3.0 -->
<title>Event Manager | Dispatch Serverless Framework</title>
<meta property="og:title" content="Event Manager" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Event manager" />
<meta property="og:description" content="Event manager" />
<link rel="canonical" href="http://localhost:4000/dispatch/documentation/specs/event-manager" />
<meta property="og:url" content="http://localhost:4000/dispatch/documentation/specs/event-manager" />
<meta property="og:site_name" content="Dispatch Serverless Framework" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-06-11T14:24:45-07:00" />
<script type="application/ld+json">
{"name":null,"description":"Event manager","author":null,"@type":"BlogPosting","url":"http://localhost:4000/dispatch/documentation/specs/event-manager","publisher":null,"image":null,"headline":"Event Manager","dateModified":"2018-06-11T14:24:45-07:00","datePublished":"2018-06-11T14:24:45-07:00","sameAs":null,"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/dispatch/documentation/specs/event-manager"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/dispatch/assets/node_modules/@clr/icons/clr-icons.min.css">
    <script src="/dispatch/assets/node_modules/@webcomponents/custom-elements/custom-elements.min.js"></script>
    <script src="/dispatch/assets/node_modules/@clr/icons/clr-icons.min.js"></script>
    <script src="/dispatch/assets/node_modules/anchor-js/anchor.js"></script>
    <link rel="stylesheet" href="/dispatch/assets/node_modules/@clr/ui/clr-ui.min.css">
    <script defer src="https://use.fontawesome.com/releases/v5.0.7/js/all.js"></script>
    <link rel="stylesheet" href="/dispatch/assets/css/style.css?v=cd131ece455317a0ce1219b8b78ef55e8e6bf546">
    <meta name="viewport" content="width=device-width">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/dispatch/assets/images/dispatch.ico/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/dispatch/assets/images/dispatch.ico/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="/dispatch/assets/images/dispatch.ico/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/dispatch/assets/images/dispatch.ico/favicon-16x16.png" sizes="16x16" />
    <meta name="application-name" content="&nbsp;"/>
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="/dispatch/assets/images/dispatch.ico/mstile-144x144.png" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
    <body>
        <clr-main-container class="main-container">
        <clr-header class="header-6 header">
    <button class="header-hamburger-trigger" type="button">
        <span></span>
    </button>

    <div class="branding">
        <a class="logo-and-title" routerlink="/" href="http://github.com/vmware/dispatch">
            <!-- <span class="clr-icon clarity-logo"></span>
            <span class="title">Project Dispatch</span> -->
            <img class="dispatch-logo" src="/dispatch/assets/images/logo-small-200.png">
        </a>
    </div>
    <div class="divider"></div>
    <div class="header-nav clr-nav-level-1">
        <a class="nav-link " id="home-link" routerlink="/" routerlinkactive="active" href="/dispatch/"><span class="nav-text">Home</span></a>
        <a class="nav-link active" routerlink="/documentation" routerlinkactive="active" href="/dispatch/documentation/front/overview"><span class="nav-text">Documentation</span></a>
        <a class="nav-link " routerlink="/code" routerlinkactive="active" href="/dispatch/code"><span class="nav-text">Code</span></a>
        <a class="nav-link " routerlink="/community" routerlinkactive="active" href="/dispatch/community"><span class="nav-text">Community</span></a>
        <a class="nav-link " routerlink="/news" routerlinkactive="active" href="/dispatch/news"><span class="nav-text">What's New</span></a>
    </div>
    <div class="settings">
        <iframe class="github-btn" frameborder="0" height="20px" scrolling="0" src="https://ghbtns.com/github-btn.html?user=vmware&repo=dispatch&type=star&count=true" width="170px"></iframe>
    </div>

    <button class="header-overflow-trigger" type="button">
        <span></span>
    </button>
    <div class="header-backdrop"></div>
</clr-header>

            <documentation class="content-container"><router-outlet></router-outlet>
                <div class="content-area">
                    <section class="dox-content">
                    <h1 id="event-manager">Event manager</h1>

<p>Event manager handles event traffic within Dispatch. It connects events to functions using subscriptions,
as well as allows creating event drivers, which serve as event sources.</p>

<h2 id="problem-statement">Problem statement</h2>

<p>Functions are commonly associated with events and are executed in response to them. To effectively manage their
relation, we need a way to handle events lifecycle (CRUD) as well as subscriptions and triggering.</p>

<h3 id="user-stories-examples">User stories (examples)</h3>

<ol>
  <li>As a <strong>developer</strong>, I want to trigger an <strong>event</strong> by providing its <strong>name/topic</strong> and JSON-formatted <strong>payload</strong>, which will
in turn cause execution of one or more functions <strong>subscribed</strong> to that event.</li>
  <li>As a <strong>developer</strong>, I want to create a <strong>subscription</strong> between an <strong>event</strong> and a <strong>function</strong>. When an event is triggered,
function(s) is/are executed with event payload.</li>
  <li>As a <strong>developer/administrator</strong>, I want to provide a sustainable way of ingesting events.</li>
</ol>

<h2 id="proposed-solution">Proposed Solution</h2>

<p>An Event Manager component, responsible for event and subscription lifecycle.</p>

<p>Event manager:</p>
<ul>
  <li>Exposes API for CRUD operations on subscriptions.</li>
  <li>Exposes API for CRUD operations on event drivers and their types.</li>
  <li>Exposes API to trigger events.</li>
  <li>Executes functions subscribed to particular events.</li>
</ul>

<h2 id="design">Design</h2>

<p><img src="event-manager.png" alt="event manager architecture" title="Event manager architecture" /></p>

<h3 id="subscription-object-schema">Subscription object schema</h3>
<ul>
  <li><code class="highlighter-rouge">subscriptionName</code> - <code class="highlighter-rouge">string</code> - subscription Name.</li>
  <li><code class="highlighter-rouge">eventType</code> - <code class="highlighter-rouge">string</code> - event Type to subscribe to.</li>
  <li><code class="highlighter-rouge">sourceType</code> - <code class="highlighter-rouge">string</code> - source type to filter on.</li>
  <li><code class="highlighter-rouge">functionName</code> - <code class="highlighter-rouge">string</code> - name of the function to execute when matching event is received.
    <h3 id="event-object-schema">Event object schema</h3>
  </li>
</ul>

<p>Event object schema follows the <a href="https://github.com/cloudevents/spec/blob/b0124528486d3f6b9a247cadd68d91b44b3d3ef4/spec.md">CloudEvent spec</a></p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span><span class="x"> </span><span class="n">events</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">CloudEvent</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="c">// Event context</span><span class="x">
	</span><span class="c">// Mandatory, e.g. "com.vmware.vsphere"</span><span class="x">
	</span><span class="n">Namespace</span><span class="x"> </span><span class="kt">string</span><span class="x"> </span><span class="s">`json:"namespace" validate:"required"`</span><span class="x">
	</span><span class="c">// Mandatory, e.g. "user.created"</span><span class="x">
	</span><span class="n">EventType</span><span class="x"> </span><span class="kt">string</span><span class="x"> </span><span class="s">`json:"event-type" validate:"required,max=128,eventtype"`</span><span class="x">
	</span><span class="c">// Optional, e.g. "VMODL6.5"</span><span class="x">
	</span><span class="n">EventTypeVersion</span><span class="x"> </span><span class="kt">string</span><span class="x"> </span><span class="s">`json:"event-type-version,omitempty" validate:"omitempty,min=1"`</span><span class="x">
	</span><span class="c">// Mandatory, fixed to "0.1"</span><span class="x">
	</span><span class="n">CloudEventsVersion</span><span class="x"> </span><span class="kt">string</span><span class="x"> </span><span class="s">`json:"cloud-events-version" validate:"eq=0.1"`</span><span class="x">
	</span><span class="c">// Mandatory, e.g. "vcenter"</span><span class="x">
	</span><span class="n">SourceType</span><span class="x"> </span><span class="kt">string</span><span class="x"> </span><span class="s">`json:"source-type" validate:"required,max=32"`</span><span class="x">
	</span><span class="c">// Mandatory, e.g. "vcenter1.corp.local"</span><span class="x">
	</span><span class="n">SourceID</span><span class="x"> </span><span class="kt">string</span><span class="x"> </span><span class="s">`json:"source-id" validate:"required,max=64"`</span><span class="x">
	</span><span class="c">// Mandatory, e.g. UUID or "43252363". Must be unique for this Source</span><span class="x">
	</span><span class="n">EventID</span><span class="x"> </span><span class="kt">string</span><span class="x"> </span><span class="s">`json:"event-id" validate:"required"`</span><span class="x">
	</span><span class="c">// Optional, Timestamp in RFC 3339 format, e.g. "1985-04-12T23:20:50.52Z"</span><span class="x">
	</span><span class="n">EventTime</span><span class="x"> </span><span class="n">time</span><span class="o">.</span><span class="n">Time</span><span class="x"> </span><span class="s">`json:"event-time,omitempty" validate:"-"`</span><span class="x">
	</span><span class="c">// Optional, if specified must be a valid URI</span><span class="x">
	</span><span class="n">SchemaURL</span><span class="x"> </span><span class="kt">string</span><span class="x"> </span><span class="s">`json:"schema-url,omitempty" validate:"omitempty,uri"`</span><span class="x">
	</span><span class="c">// Optional, if specified must be a valid mime type, e.g. "application/json"</span><span class="x">
	</span><span class="n">ContentType</span><span class="x"> </span><span class="kt">string</span><span class="x"> </span><span class="s">`json:"content-type,omitempty" validate:"omitempty,min=1"`</span><span class="x">
	</span><span class="c">// Optional, key-value dictionary for use by Dispatch</span><span class="x">
	</span><span class="n">Extensions</span><span class="x"> </span><span class="n">CloudEventExtensions</span><span class="x"> </span><span class="s">`json:"extensions,omitempty" validate:"omitempty,min=1"`</span><span class="x">

	</span><span class="c">// Event payload</span><span class="x">
	</span><span class="n">Data</span><span class="x"> </span><span class="kt">string</span><span class="x"> </span><span class="s">`json:"data",validate:"omitempty"`</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="c">// CloudEventExtensions holds attributes for CloudEvent that are not part of the standard.</span><span class="x">
</span><span class="k">type</span><span class="x"> </span><span class="n">CloudEventExtensions</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="k">interface</span><span class="p">{}</span><span class="x">

</span></code></pre></div></div>
<h2 id="milestones">Milestones</h2>

<p>TBD</p>


                    </section>
                </div>

                <nav class="sidenav clr-nav-level-2">
                    <section class="sidenav-content">
                    

                    
                    
                        <!-- front section is top level and has no label -->
                        <section class="nav-group collapsible">

                        
                            <ul class="nav-list">
                                <documentation-nav-links type="">
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/front/overview">Overview</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/front/roadmap">Roadmap</a></li>
                                
                                
                                </documentation-nav-links>
                            </ul>
                        </section>
                    
                    
                    
                        <!-- front section is top level and has no label -->
                        <section class="nav-group collapsible">

                        
                        
                            
                            <input id="Guides" type="checkbox" checked>
                            
                            <label for="Guides">Guides</label>
                        
                        
                            <ul class="nav-list">
                                <documentation-nav-links type="Guides">
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/guides/building">Building</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/guides/built-in-event-drivers">Built In Event Drivers</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/guides/custom-event-drivers">Custom Event Drivers</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/guides/docker-for-mac">Docker For Mac</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/guides/gke">Gke</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/guides/minikube">Minikube</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/guides/quickstart">Quickstart</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/guides/setup-authentication">Setup Authentication</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/guides/setup-service-acccount-authentication">Setup Service Acccount Authentication</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/guides/troubleshooting">Troubleshooting</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/guides/working-with-events">Working With Events</a></li>
                                
                                
                                </documentation-nav-links>
                            </ul>
                        </section>
                    
                    
                    
                        <!-- front section is top level and has no label -->
                        <section class="nav-group collapsible">

                        
                        
                            
                            <input id="posts" type="checkbox" checked>
                            
                            <label for="posts">Posts</label>
                        
                        
                            <ul class="nav-list">
                                <documentation-nav-links type="">
                                
                                
                                    <li><a class="nav-link" href="/dispatch/2018/05/23/v0-1-15-release.html">v0.1.15 Dispatch Release</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/2018/06/06/v0-1-16-release.html">v0.1.16 Dispatch Release</a></li>
                                
                                
                                </documentation-nav-links>
                            </ul>
                        </section>
                    
                    
                    
                        <!-- front section is top level and has no label -->
                        <section class="nav-group collapsible">

                        
                        
                            
                            <input id="Specifications" type="checkbox">
                            
                            <label for="Specifications">Specifications</label>
                        
                        
                            <ul class="nav-list">
                                <documentation-nav-links type="Specifications">
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/api-gateway">Api Gateway</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/application">Application</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/development">Development</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/dispatch">Dispatch</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/error-handling">Error Handling</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/event-gateway">Event Gateway</a></li>
                                
                                
                                
                                    <li><a class="nav-link active" routerlinkactive="active" href="/dispatch/documentation/specs/event-manager">Event Manager</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/function-gateway">Function Gateway</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/function-schema-validation">Function Schema Validation</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/identity-management">Identity Management</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/image-manager">Image Manager</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/language-support">Language Support</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/rest-api">Rest Api</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/secrets-store">Secrets Store</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/service-manager">Service Manager</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/terminology">Terminology</a></li>
                                
                                
                                </documentation-nav-links>
                            </ul>
                        </section>
                    
                    
                    
                        <!-- front section is top level and has no label -->
                        <section class="nav-group collapsible">

                        
                        
                            
                            <input id="Usage" type="checkbox" checked>
                            
                            <label for="Usage">Usage</label>
                        
                        
                            <ul class="nav-list">
                                <documentation-nav-links type="Usage">
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/usage/api">API Endpoints</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/usage/event-drivers">Events Drivers and Subscriptions</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/usage/functions">Functions</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/usage/iam">Roles and Policies</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/usage/images">Images and Base Images</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/usage/services">Services Integration</a></li>
                                
                                
                                </documentation-nav-links>
                            </ul>
                        </section>
                    
                    
                    </section>
                </nav>
            </documentation>
        <footer></footer>
<script>
    anchors.add();
</script>
<script src="/dispatch/assets/js/scale.fix.js"></script>
        </clr-main-container>
    </body>
</html>