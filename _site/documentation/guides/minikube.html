<!doctype html>
<html lang="en-US">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <!-- Begin Jekyll SEO tag v2.3.0 -->
<title>Minikube | Dispatch Serverless Framework</title>
<meta property="og:title" content="Minikube" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Installing Kubernetes via Minikube for Dispatch" />
<meta property="og:description" content="Installing Kubernetes via Minikube for Dispatch" />
<link rel="canonical" href="http://localhost:4000/dispatch/documentation/guides/minikube" />
<meta property="og:url" content="http://localhost:4000/dispatch/documentation/guides/minikube" />
<meta property="og:site_name" content="Dispatch Serverless Framework" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-06-11T14:24:45-07:00" />
<script type="application/ld+json">
{"name":null,"description":"Installing Kubernetes via Minikube for Dispatch","author":null,"@type":"BlogPosting","url":"http://localhost:4000/dispatch/documentation/guides/minikube","publisher":null,"image":null,"headline":"Minikube","dateModified":"2018-06-11T14:24:45-07:00","datePublished":"2018-06-11T14:24:45-07:00","sameAs":null,"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/dispatch/documentation/guides/minikube"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/dispatch/assets/node_modules/@clr/icons/clr-icons.min.css">
    <script src="/dispatch/assets/node_modules/@webcomponents/custom-elements/custom-elements.min.js"></script>
    <script src="/dispatch/assets/node_modules/@clr/icons/clr-icons.min.js"></script>
    <script src="/dispatch/assets/node_modules/anchor-js/anchor.js"></script>
    <link rel="stylesheet" href="/dispatch/assets/node_modules/@clr/ui/clr-ui.min.css">
    <script defer src="https://use.fontawesome.com/releases/v5.0.7/js/all.js"></script>
    <link rel="stylesheet" href="/dispatch/assets/css/style.css?v=cd131ece455317a0ce1219b8b78ef55e8e6bf546">
    <meta name="viewport" content="width=device-width">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/dispatch/assets/images/dispatch.ico/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/dispatch/assets/images/dispatch.ico/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="/dispatch/assets/images/dispatch.ico/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/dispatch/assets/images/dispatch.ico/favicon-16x16.png" sizes="16x16" />
    <meta name="application-name" content="&nbsp;"/>
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="/dispatch/assets/images/dispatch.ico/mstile-144x144.png" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
    <body>
        <clr-main-container class="main-container">
        <clr-header class="header-6 header">
    <button class="header-hamburger-trigger" type="button">
        <span></span>
    </button>

    <div class="branding">
        <a class="logo-and-title" routerlink="/" href="http://github.com/vmware/dispatch">
            <!-- <span class="clr-icon clarity-logo"></span>
            <span class="title">Project Dispatch</span> -->
            <img class="dispatch-logo" src="/dispatch/assets/images/logo-small-200.png">
        </a>
    </div>
    <div class="divider"></div>
    <div class="header-nav clr-nav-level-1">
        <a class="nav-link " id="home-link" routerlink="/" routerlinkactive="active" href="/dispatch/"><span class="nav-text">Home</span></a>
        <a class="nav-link active" routerlink="/documentation" routerlinkactive="active" href="/dispatch/documentation/front/overview"><span class="nav-text">Documentation</span></a>
        <a class="nav-link " routerlink="/code" routerlinkactive="active" href="/dispatch/code"><span class="nav-text">Code</span></a>
        <a class="nav-link " routerlink="/community" routerlinkactive="active" href="/dispatch/community"><span class="nav-text">Community</span></a>
        <a class="nav-link " routerlink="/news" routerlinkactive="active" href="/dispatch/news"><span class="nav-text">What's New</span></a>
    </div>
    <div class="settings">
        <iframe class="github-btn" frameborder="0" height="20px" scrolling="0" src="https://ghbtns.com/github-btn.html?user=vmware&repo=dispatch&type=star&count=true" width="170px"></iframe>
    </div>

    <button class="header-overflow-trigger" type="button">
        <span></span>
    </button>
    <div class="header-backdrop"></div>
</clr-header>

            <documentation class="content-container"><router-outlet></router-outlet>
                <div class="content-area">
                    <section class="dox-content">
                    <h1 id="installing-kubernetes-via-minikube-for-dispatch">Installing Kubernetes via Minikube for Dispatch</h1>

<p>We recommend using minikube to install and manage local kubernetes clusters for Dispatch development, or for simply
getting up and running quickly. If you have VMware Fusion or Workstation, we recommend <a href="#minikube_via_linux_vm">minikube via a Linux
VM</a> as the easiest way to get started.  This is also the only supported way to run Dispatch on
Windows.</p>

<h2 id="minikube-on-mac">Minikube on Mac</h2>

<p>Installing minikube is on mac easy.  The following installs the latest minikube on a mac.  See the official <a href="https://github.com/kubernetes/minikube">minikube
repository</a> for more details.  This guide assumes you have
<a href="https://brew.sh">homebrew</a> installed.</p>

<ol>
  <li>Install minikube via brew:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>brew cask install minikube
<span class="o">==&gt;</span> Satisfying dependencies
All Formula dependencies satisfied.
<span class="o">==&gt;</span> Downloading https://storage.googleapis.com/minikube/releases/v0.24.1/minikube-darwin-amd64
<span class="c">######################################################################## 100.0%</span>
<span class="o">==&gt;</span> Verifying checksum <span class="k">for </span>Cask minikube
<span class="o">==&gt;</span> Installing Cask minikube
<span class="o">==&gt;</span> Linking Binary <span class="s1">'minikube-darwin-amd64'</span> to <span class="s1">'/usr/local/bin/minikube'</span><span class="nb">.</span>
üç∫  minikube was successfully installed!
</code></pre></div></div>

<ol>
  <li>Install the VM driver of your choice.  We recommend hyperkit (unless you use a VPN):</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">-LO</span> https://storage.googleapis.com/minikube/releases/latest/docker-machine-driver-hyperkit <span class="o">&amp;&amp;</span> chmod +x docker-machine-driver-hyperkit <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>mv docker-machine-driver-hyperkit /usr/local/bin/ <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>chown root:wheel /usr/local/bin/docker-machine-driver-hyperkit <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>chmod u+s /usr/local/bin/docker-machine-driver-hyperkit
</code></pre></div></div>

<blockquote>
  <p><strong>Note:</strong> If you require a VPN for connectivity, you should choose either a
<a href="https://www.vmware.com/products/fusion.html">vmwarefusion</a>, or <a href="https://www.virtualbox.org">virtualbox</a> as the VM
driver, as hyperkit will bypass the VPN.  This means that Dispatch (or any other application) deployed on your cluster
will not have access to the private network you are connecting to with the VPN.</p>
</blockquote>

<ol>
  <li>Create a kubernetes cluster:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>minikube start <span class="nt">--vm-driver</span><span class="o">=</span>hyperkit <span class="nt">--disk-size</span><span class="o">=</span>50g <span class="nt">--memory</span><span class="o">=</span>6144
Starting <span class="nb">local </span>Kubernetes v1.10.0 cluster...
Starting VM...
Getting VM IP address...
Moving files into cluster...
Setting up certs...
Connecting to cluster...
Setting up kubeconfig...
Starting cluster components...
Kubectl is now configured to use the cluster.
Loading cached images from config file.
</code></pre></div></div>

<ol>
  <li>Verify installation:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get pods <span class="nt">--all-namespaces</span>
NAMESPACE     NAME                          READY     STATUS    RESTARTS   AGE
kube-system   kube-addon-manager-minikube   1/1       Running   0          54s
kube-system   kube-dns-545bc4bfd4-mjljc     3/3       Running   0          43s
kube-system   kube-proxy-nmzhd              1/1       Running   0          43s
kube-system   kubernetes-dashboard-5fllx    1/1       Running   2          41s
kube-system   storage-provisioner           1/1       Running   0          42s
</code></pre></div></div>

<ol>
  <li>Install and initialize Helm:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>brew install kubernetes-helm
<span class="nv">$ </span>helm init
<span class="nv">$HELM_HOME</span> has been configured at /Users/bjung/.helm.

Tiller <span class="o">(</span>the Helm server-side component<span class="o">)</span> has been installed into your Kubernetes Cluster.
Happy Helming!
</code></pre></div></div>

<h2 id="minikube-via-linux-vm">Minikube via Linux VM</h2>

<p>In order to provide a means of getting a Dispatch environement ready that ‚Äújust works‚Äù, we‚Äôve prepared a VM which
includes just about everything needed to deploy kubernetes and install Dispatch.  By following these steps, you
should have an environemnt ready for Dispatch quickly and repeatably without installing any dependencies on your
local machine.  This does assume that you have VMware Fusion, Workstation or VirtualBox installed.</p>

<ol>
  <li>
    <p>Download <a href="https://s3-us-west-2.amazonaws.com/dispatch-imgs/Ubuntu_16.04.2_server_amd64_dispatch.ova">OVA</a></p>
  </li>
  <li>
    <p>Import the OVA.  Instructions vary depending on which virtualization software you are using.</p>
  </li>
  <li>Login to console with credentials: vmware/vmware
    <ul>
      <li>Get IP address ifconfig (look for the 10.x.x.x address)</li>
    </ul>
  </li>
  <li>SSH to the deployed VM with same credentials (<code class="highlighter-rouge">ssh vmware@10.x.x.x</code>):</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ssh vmware@10.52.72.124
vmware@10.52.72.124<span class="s1">'s password:
Welcome to Ubuntu 16.04.2 LTS (GNU/Linux 4.4.0-62-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

167 packages can be updated.
90 updates are security updates.


Last login: Thu Feb  8 06:07:13 2018
vmware@pek2-office-9th-10-117-171-69:~$
</span></code></pre></div></div>

<ol>
  <li>Run <code class="highlighter-rouge">./install-minikube.sh</code> (there will be some warnings, which you can safely ignore):</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>./install-minikube.sh
<span class="o">[</span><span class="nb">sudo</span><span class="o">]</span> password <span class="k">for </span>vmware:
Starting <span class="nb">local </span>Kubernetes v1.9.0 cluster...
Starting VM...
Getting VM IP address...
Moving files into cluster...
Setting up certs...
Connecting to cluster...
Setting up kubeconfig...
Starting cluster components...
Kubectl is now configured to use the cluster.
...
</code></pre></div></div>

<ol>
  <li>Verify installation:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl <span class="nt">-n</span> kube-system get pods
NAME                                    READY     STATUS    RESTARTS   AGE
etcd-minikube                           1/1       Running   0          5m
kube-addon-manager-minikube             1/1       Running   0          5m
kube-apiserver-minikube                 1/1       Running   0          5m
kube-controller-manager-minikube        1/1       Running   0          5m
kube-dns-6f4fd4bdf-n58vd                3/3       Running   0          6m
kube-proxy-5s52t                        1/1       Running   0          6m
kube-scheduler-minikube                 1/1       Running   0          5m
kubernetes-dashboard-77d8b98585-49wrf   1/1       Running   1          6m
storage-provisioner                     1/1       Running   0          6m
</code></pre></div></div>

<ol>
  <li>Initialize Helm:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>helm init
Creating /home/vmware/.helm
Creating /home/vmware/.helm/repository
Creating /home/vmware/.helm/repository/cache
Creating /home/vmware/.helm/repository/local
Creating /home/vmware/.helm/plugins
Creating /home/vmware/.helm/starters
Creating /home/vmware/.helm/cache/archive
Creating /home/vmware/.helm/repository/repositories.yaml
Adding stable repo with URL: https://kubernetes-charts.storage.googleapis.com
Adding <span class="nb">local </span>repo with URL: http://127.0.0.1:8879/charts
<span class="nv">$HELM_HOME</span> has been configured at /home/vmware/.helm.

Tiller <span class="o">(</span>the Helm server-side component<span class="o">)</span> has been installed into your Kubernetes Cluster.
Happy Helming!
</code></pre></div></div>

<p>As a convenience, the Dispatch project has been cloned into <code class="highlighter-rouge">~/code/dispatch</code> on the VM.</p>

                    </section>
                </div>

                <nav class="sidenav clr-nav-level-2">
                    <section class="sidenav-content">
                    

                    
                    
                        <!-- front section is top level and has no label -->
                        <section class="nav-group collapsible">

                        
                            <ul class="nav-list">
                                <documentation-nav-links type="">
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/front/overview">Overview</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/front/roadmap">Roadmap</a></li>
                                
                                
                                </documentation-nav-links>
                            </ul>
                        </section>
                    
                    
                    
                        <!-- front section is top level and has no label -->
                        <section class="nav-group collapsible">

                        
                        
                            
                            <input id="Guides" type="checkbox">
                            
                            <label for="Guides">Guides</label>
                        
                        
                            <ul class="nav-list">
                                <documentation-nav-links type="Guides">
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/guides/building">Building</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/guides/built-in-event-drivers">Built In Event Drivers</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/guides/custom-event-drivers">Custom Event Drivers</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/guides/docker-for-mac">Docker For Mac</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/guides/gke">Gke</a></li>
                                
                                
                                
                                    <li><a class="nav-link active" routerlinkactive="active" href="/dispatch/documentation/guides/minikube">Minikube</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/guides/quickstart">Quickstart</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/guides/setup-authentication">Setup Authentication</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/guides/setup-service-acccount-authentication">Setup Service Acccount Authentication</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/guides/troubleshooting">Troubleshooting</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/guides/working-with-events">Working With Events</a></li>
                                
                                
                                </documentation-nav-links>
                            </ul>
                        </section>
                    
                    
                    
                        <!-- front section is top level and has no label -->
                        <section class="nav-group collapsible">

                        
                        
                            
                            <input id="posts" type="checkbox" checked>
                            
                            <label for="posts">Posts</label>
                        
                        
                            <ul class="nav-list">
                                <documentation-nav-links type="">
                                
                                
                                    <li><a class="nav-link" href="/dispatch/2018/05/23/v0-1-15-release.html">v0.1.15 Dispatch Release</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/2018/06/06/v0-1-16-release.html">v0.1.16 Dispatch Release</a></li>
                                
                                
                                </documentation-nav-links>
                            </ul>
                        </section>
                    
                    
                    
                        <!-- front section is top level and has no label -->
                        <section class="nav-group collapsible">

                        
                        
                            
                            <input id="Specifications" type="checkbox" checked>
                            
                            <label for="Specifications">Specifications</label>
                        
                        
                            <ul class="nav-list">
                                <documentation-nav-links type="Specifications">
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/api-gateway">Api Gateway</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/application">Application</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/development">Development</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/dispatch">Dispatch</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/error-handling">Error Handling</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/event-gateway">Event Gateway</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/event-manager">Event Manager</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/function-gateway">Function Gateway</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/function-schema-validation">Function Schema Validation</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/identity-management">Identity Management</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/image-manager">Image Manager</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/language-support">Language Support</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/rest-api">Rest Api</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/secrets-store">Secrets Store</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/service-manager">Service Manager</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/specs/terminology">Terminology</a></li>
                                
                                
                                </documentation-nav-links>
                            </ul>
                        </section>
                    
                    
                    
                        <!-- front section is top level and has no label -->
                        <section class="nav-group collapsible">

                        
                        
                            
                            <input id="Usage" type="checkbox" checked>
                            
                            <label for="Usage">Usage</label>
                        
                        
                            <ul class="nav-list">
                                <documentation-nav-links type="Usage">
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/usage/api">API Endpoints</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/usage/event-drivers">Events Drivers and Subscriptions</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/usage/functions">Functions</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/usage/iam">Roles and Policies</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/usage/images">Images and Base Images</a></li>
                                
                                
                                
                                    <li><a class="nav-link" href="/dispatch/documentation/usage/services">Services Integration</a></li>
                                
                                
                                </documentation-nav-links>
                            </ul>
                        </section>
                    
                    
                    </section>
                </nav>
            </documentation>
        <footer></footer>
<script>
    anchors.add();
</script>
<script src="/dispatch/assets/js/scale.fix.js"></script>
        </clr-main-container>
    </body>
</html>